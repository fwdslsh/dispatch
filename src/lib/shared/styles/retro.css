/* ==========================================================================
   Global UI — Retro Terminal x Modern UI (Augmented-UI v2 ready)
   Requires: augmented-ui v2 CSS loaded before this file.
   Docs: https://augmented-ui.com/docs/
   ========================================================================== */
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Staatliches&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Protest+Revolution&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100..900;1,100..900&family=Protest+Revolution&display=swap');

/* 0) Base theme tokens */
:root {
    color-scheme: light dark;

    /* Typography */
    --font-sans:
        ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial,
        'Apple Color Emoji', 'Segoe UI Emoji';
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, 'Liberation Mono', monospace;

    --font-sans: 'Exo 2', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: 'Share Tech Mono', 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    --font-accent: 'Protest Revolution', 'Courier New', monospace;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 18px;
    --font-size-4: 22px;
    --font-size-5: 28px;

    /* Spacing */
    --space-0: 2px;
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 24px;
    --space-6: 32px;

    /* Phosphor terminal palette - refined for professional feel */
    --bg: light-dark(#0c1210, #0c1210);
    --surface: light-dark(#121a17, #121a17);
    --elev: light-dark(#18231f, #18231f);
    --text: light-dark(#cfe7d8, #d9ffe6);
    --muted: light-dark(#8aa699, #92b3a4);

    --accent: light-dark(#2ee66b, #2ee66b);
    --accent-2: light-dark(#ffd166, #ffd166);

    --ok: light-dark(#26d07c, #26d07c);
    --warn: light-dark(#ffb703, #ffb703);
    --err: light-dark(#ef476f, #ef476f);
    --info: light-dark(#00c2ff, #00c2ff);

    --line: color-mix(in oklab, var(--text) 20%, transparent);
    --glow: color-mix(in oklab, var(--accent) 40%, transparent);
    --focus: color-mix(in oklab, var(--accent) 80%, white 10%);


    /* Primary Phosphor Green Family */
    --primary: #2ee66b;
    --primary-bright: #4eff82;
    --primary-dim: #1ea851;
    --primary-muted: #2ee66b80;
    --primary-gradient: linear-gradient(135deg, #2ee66b, #4eff82);
    --primary-glow: rgba(46, 230, 107, 0.3);

    /* Accent Colors for Variety */
    --accent: #2ee66b;
    --accent-amber: #ffd166;
    --accent-cyan: #00c2ff;
    --accent-magenta: #ff6b9d;
    --accent-warning: #ff8c42;
}

/* Reset & base */
*,
*::before,
*::after {
    box-sizing: border-box;
    transition-behavior: allow-discrete;

}

html,
body {
    height: 100%;
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: var(--font-sans);
    font-size: var(--font-size-2);
    line-height: 1.45;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
}

:focus-visible {
    outline: 2px solid var(--focus);
    outline-offset: 2px;
}

::selection {
    background: color-mix(in oklab, var(--accent) 30%, transparent);
    color: var(--text);
}

/* Scrollbars */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--accent) transparent;
}

::-webkit-scrollbar {
    height: 10px;
    width: 10px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg,
            var(--accent),
            color-mix(in oklab, var(--accent), transparent 35%));
    border-radius: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

/* 1) Type - Enhanced retro-modern hierarchy */
h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: var(--font-mono);
    font-weight: 700;
    letter-spacing: -0.02em;
    margin: var(--space-5) 0 var(--space-3);
    color: var(--text);
    text-transform: uppercase;
}

h1 {
    font-family: var(--font-accent);
    font-size: clamp(32px, 4vw, 48px);
    letter-spacing: 0.05em;
    text-shadow: 0 0 20px color-mix(in oklab, var(--accent) 30%, transparent);
}

h2 {
    font-size: clamp(24px, 3vw, 36px);
    letter-spacing: 0.02em;
}

h3 {
    font-size: clamp(20px, 2.5vw, 28px);
}

p {
    margin: 0 0 var(--space-4);
    color: var(--text);
    line-height: 1.6;
}

small,
.muted {
    color: var(--muted);
    font-family: var(--font-mono);
    font-size: 0.85em;
}

code,
kbd,
pre,
samp {
    font-family: var(--font-mono);
    font-size: 0.95em;
    background: color-mix(in oklab, var(--surface) 92%, black 8%);
    border: 1px solid var(--line);
    border-radius: 6px;
    padding: 0 var(--space-1);
}

pre {
    padding: var(--space-3);
    overflow: auto;
}

/* 2) Links */
a {
    color: var(--accent);
    text-decoration: none;
    border-bottom: 1px dotted color-mix(in oklab, var(--accent) 60%, transparent);
}

a:hover {
    text-decoration: underline;
}

/* 3) Layout helpers */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--space-4);
}

.stack>*+* {
    margin-top: var(--space-4);
}

.cluster {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
    align-items: center;
}

/* 4) Cards & Panels (Augmented-UI v2 mixins)
   Equip shapes via data-augmented-ui with mixins like `tl-clip`, `br-clip`, plus `border|inlay|both`.
   Example markup:
   <div class="card aug" data-augmented-ui="tl-clip br-clip both"></div>
   (Use class selectors to override defaults per v2 specificity guidance.) */
.card,
.panel {
    background: var(--surface);
    border: 1px solid var(--line);
    padding: var(--space-5);
    position: relative;
    box-shadow:
        0 0 0 1px color-mix(in oklab, var(--accent) 10%, transparent),
        0 0 24px -8px var(--glow);
    border-radius: 10px;
    /* graceful fallback if augs unsupported */
}

/* Augmented preset: very subtle professional styling */
.aug {
    /* region sizing (mixin layer) - smaller cuts */
    --aug-tl: 8px;
    --aug-br: 8px;

    /* BORDER (v2) - very subtle border */
    --aug-border: initial;
    --aug-border-all: 1px;
    --aug-border-bg: var(--accent);
    --aug-border-opacity: 0.25;

    /* INLAY (v2) - very minimal inner accent */
    --aug-inlay: initial;
    --aug-inlay-all: 1px;
    --aug-inlay-bg: color-mix(in oklab, var(--accent) 8%, transparent);
    --aug-inlay-opacity: 0.4;

    /* Clean hover enhancement */
    transition: all 0.15s ease;
}

.aug:hover {
    --aug-border-opacity: 0.4;
    --aug-inlay-opacity: 0.6;
}

.card.aug {
    background: var(--surface);
}

.panel.aug {
    background: var(--elev);
}

/* 5) Rules & chrome */
.hr {
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--line), transparent);
    border: 0;
    margin: var(--space-5) 0;
}

.term-grid {
    display: grid;
    gap: var(--space-3);
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

/* 6) Forms */
input[type='text'],
input[type='search'],
input[type='password'],
input[type='email'],
select,
textarea {
    width: 100%;
    padding: var(--space-3) var(--space-4);
    font: 500 var(--font-size-2) / 1.2 var(--font-mono);
    background: color-mix(in oklab, var(--surface) 92%, black 8%);
    color: var(--text);
    border: 1px solid var(--line);
    border-radius: 8px;
    transition:
        border-color 0.15s ease,
        box-shadow 0.15s ease,
        background 0.15s ease;
}

input::placeholder,
textarea::placeholder {
    color: color-mix(in oklab, var(--muted) 70%, transparent);
}

input:focus,
select:focus,
textarea:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 30%, transparent);
    outline: none;
}

/* Augmented input rails (use data-augmented-ui on a wrapper) */
/* Markup:
   <label class="input-aug" data-augmented-ui="t-rect b-rect both">
     <input ...>
   </label> */
.input-aug {
    --aug-t: 10px;
    --aug-b: 10px;
    --aug-border-all: 2px;
    --aug-border-bg: linear-gradient(90deg, var(--accent), transparent, var(--accent));
    --aug-inlay-all: 1px;
    --aug-inlay-bg: linear-gradient(90deg,
            transparent,
            color-mix(in oklab, var(--accent) 20%, transparent),
            transparent);
}

/* 7) Buttons */
.button {
    --btn-bg: color-mix(in oklab, var(--surface) 88%, black 12%);
    --btn-border: color-mix(in oklab, var(--accent) 40%, transparent);

    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: calc(var(--space-2) + 1px) calc(var(--space-4) + 2px);
    font: 700 var(--font-size-2) / 1 var(--font-mono);
    color: var(--text);
    background: var(--btn-bg);
    border: 1px solid var(--btn-border);
    border-radius: 10px;
    cursor: pointer;
    text-decoration: none;
    box-shadow:
        inset 0 0 0 1px color-mix(in oklab, var(--accent) 10%, transparent),
        0 0 18px -8px var(--glow);
    transition:
        transform 0.06s ease,
        box-shadow 0.15s ease,
        border-color 0.15s ease;
}

.button:hover {
    border-color: var(--accent);
}

.button:active {
    transform: translateY(1px);
}

.button.primary {
    background: color-mix(in oklab, var(--btn-bg) 70%, var(--accent) 30%);
}

.button.warn {
    border-color: var(--warn);
    color: var(--warn);
}

.button.danger {
    border-color: var(--err);
    color: var(--err);
}

/* Register custom properties for transitions */
@property --aug-l {
    syntax: '<length>';
    initial-value: 4px;
    inherits: false;
}

@property --aug-r {
    syntax: '<length>';
    initial-value: 4px;
    inherits: false;
}

@property --aug-border-all {
    syntax: '<length>';
    initial-value: 1px;
    inherits: false;
}

@property --aug-border-opacity {
    syntax: '<number>';
    initial-value: 0.2;
    inherits: false;
}

@property --aug-inlay-all {
    syntax: '<length>';
    initial-value: 0px;
    inherits: false;
}

@property --aug-inlay-opacity {
    syntax: '<number>';
    initial-value: 0.3;
    inherits: false;
}

/* Augmented button styling - animated professional approach */
.button.aug {
    --aug-tl: 8px;
    --aug-br: 8px;
    --aug-border-all: 1px;
    --aug-border-bg: var(--accent);
    --aug-border-opacity: 0.2;
    --aug-inlay-all: 0px;
    --aug-inlay-bg: color-mix(in oklab, var(--accent) 5%, transparent);
    --aug-inlay-opacity: 0.3;

    /* Override base button border to prevent clashing */
    border: none;
    border-radius: 0;

    text-transform: uppercase;
    font-weight: 600;
    letter-spacing: 0.02em;
    
    /* Animate augmented-ui properties and effects */
    transition: 
        --aug-l 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        --aug-r 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        --aug-border-all 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        --aug-border-opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        --aug-inlay-all 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        --aug-inlay-opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

.button.aug:hover {
    
    --aug-tl: 10px;
    --aug-br: 10px;
    --aug-border-all: 1px;
    --aug-inlay-bg: color-mix(in oklab, var(--accent) 50%, transparent);
    --aug-inlay-all: 1px;
    --aug-inlay-opacity: 0.5;
    
    /* Add outer glow */
    box-shadow: 
        0 0 20px rgba(46, 230, 107, 0.4),
        0 0 40px rgba(46, 230, 107, 0.2);
}

.button.aug:active,
.button.aug.active {
    --aug-br: 16px;
    --aug-tl: 16px;
    --aug-border-all: 1.5px;
    --aug-border-opacity: 0.8;
    --aug-inlay-all: 1px;
    --aug-inlay-opacity: 0.7;
    
    /* Inner glow for pressed state + slight scale */
    box-shadow: 
        inset 0 0 8px rgba(46, 230, 107, 0.3),
        0 0 10px rgba(46, 230, 107, 0.2);
    transform: scale(0.98);
}

.button.aug.ghost:hover {
    --aug-l: 6px;
    --aug-r: 6px;
    --aug-border-all: 2px;
    --aug-border-opacity: 0.5;
    --aug-inlay-all: 1px;
    --aug-inlay-opacity: 0.4;
    
    /* Ghost variant glow */
    box-shadow: 
        0 0 18px rgba(46, 230, 107, 0.3),
        0 0 35px rgba(46, 230, 107, 0.15);
}

.button.aug.ghost:active,
.button.aug.ghost.active {
    --aug-l: 5px;
    --aug-r: 5px;
    --aug-border-all: 2px;
    --aug-border-opacity: 0.7;
    --aug-inlay-all: 1px;
    --aug-inlay-opacity: 0.6;
    
    /* Ghost inner glow for pressed state */
    box-shadow: 
        inset 0 0 6px rgba(46, 230, 107, 0.25),
        0 0 8px rgba(46, 230, 107, 0.1);
}


.button.aug.ghost:active,
.button.aug.ghost.active {
    --aug-border-opacity: 0.5;
    --aug-inlay-opacity: 0.7;
    /* Ghost inner glow for pressed state */
    box-shadow: inset 0 0 6px rgba(46, 230, 107, 0.25) !important;
}

/* 8) Tables */
table {
    width: 100%;
    border-collapse: collapse;
    font-family: var(--font-mono);
    font-size: var(--font-size-1);
    background: var(--surface);
    border: 1px solid var(--line);
    border-radius: 8px;
    overflow: hidden;
}

thead th {
    text-align: left;
    padding: var(--space-3);
    background: color-mix(in oklab, var(--surface) 80%, black 20%);
    color: var(--accent);
    border-bottom: 1px solid var(--line);
}

tbody td {
    padding: var(--space-3);
    border-top: 1px solid color-mix(in oklab, var(--line), transparent 10%);
}

tbody tr:hover {
    background: color-mix(in oklab, var(--elev) 90%, black 10%);
}

/* 9) Badges */
.badge {
    display: inline-block;
    padding: 2px 8px;
    font: 700 var(--font-size-0) / 1 var(--font-mono);
    color: var(--text);
    border: 1px solid var(--line);
    border-radius: 999px;
    background: color-mix(in oklab, var(--surface) 86%, black 14%);
}

.badge.ok {
    color: var(--ok);
    border-color: color-mix(in oklab, var(--ok) 40%, var(--line));
}

.badge.warn {
    color: var(--warn);
    border-color: color-mix(in oklab, var(--warn) 40%, var(--line));
}

.badge.err {
    color: var(--err);
    border-color: color-mix(in oklab, var(--err) 40%, var(--line));
}

/* 10) Subtle CRT overlay */
.crt {
    position: relative;
    isolation: isolate;
}

.crt::after {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(0deg,
            color-mix(in oklab, var(--text) 2%, transparent) 0px,
            transparent 1px,
            transparent 3px);
    mix-blend-mode: overlay;
    opacity: 0.06;
    pointer-events: none;
    z-index: 2;
}

/* 11) Utilities & Retro Effects */
.glow {
    text-shadow: 0 0 8px var(--glow);
}

.sep {
    border-top: 1px dashed var(--line);
    margin: var(--space-4) 0;
}

/* Terminal-style prompt indicators */
.prompt::before {
    content: "$ ";
    color: var(--accent);
    font-family: var(--font-mono);
    font-weight: 700;
}

/* Enhanced focus states for accessibility and retro feel */
*:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 20%, transparent);
}

/* Subtle body scan lines for retro CRT effect */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(0deg,
            transparent 0px,
            transparent 2px,
            color-mix(in oklab, var(--accent) 2%, transparent) 3px,
            transparent 4px);
    pointer-events: none;
    z-index: 1000;
    opacity: 0.3;
    mix-blend-mode: overlay;
}

/* Better visual hierarchy for sessions and controls */
.session-indicator {
    font-family: var(--font-mono);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.session-indicator::before {
    content: "◦ ";
    color: var(--accent);
}

.session-indicator.active::before {
    content: "● ";
    color: var(--accent);
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

/* 12) Nesting guidance (v2):
   If you nest augmented elements, place a reset layer between them:
   [data-augmented-ui] [data-augmented-ui-reset] [data-augmented-ui]
   This ensures independent shapes & borders in modern browsers. */